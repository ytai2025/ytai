<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹¸é‹æŠ˜æ‰£ä»»ä½ æŠ½</title>
    <style>
        :root {
            --primary: #00ff88;
            --bg: #121212;
            --wheel-border: #ffffff;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-transform: uppercase;
            background: linear-gradient(90deg, #ff0055, #00ff88, #00ccff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
            text-align: center;
        }

        .wheel-container {
            position: relative;
            width: 360px;
            height: 360px;
            margin: 20px 0;
            filter: drop-shadow(0 0 15px rgba(0, 255, 136, 0.2));
        }

        /* æŒ‡é‡ */
        .stopper {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 50px;
            clip-path: polygon(100% 0, 50% 100%, 0 0);
            z-index: 10;
            background: linear-gradient(to bottom, #ff0055, #ff4d4d);
            box-shadow: 0 0 15px #ff0055;
        }

        /* è½‰ç›¤ä¸»é«” */
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 4px solid var(--wheel-border);
            position: relative;
            transition: transform 4s cubic-bezier(0.1, 0.7, 0.1, 1);
            box-shadow: 0 0 20px rgba(0,0,0,0.5), inset 0 0 20px rgba(0,0,0,0.5);
            
            /* èƒŒæ™¯è§’åº¦å®šç¾© (Conic Gradient 0deg = 12é»é˜):
               1. 1999 (0Â° ~ 270Â°) -> é»‘è‰²
               2. 1299 (270Â° ~ 310Â°) -> è—è‰² (40åº¦å¯¬)
               3. 1499 (310Â° ~ 340Â°) -> æ©˜è‰² (30åº¦å¯¬)
               4. 1099 (340Â° ~ 360Â°) -> ç²‰è‰² (20åº¦å¯¬ - æœ€å°!)
            */
            background: conic-gradient(
                #2a2a2a 0deg 270deg,   
                #2980b9 270deg 310deg, 
                #f39c12 310deg 340deg, 
                #ff0055 340deg 360deg  
            );
        }

        .wheel::after {
            content: "";
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 50px; height: 50px;
            background: radial-gradient(circle, #333, #000);
            border: 2px solid #00ff88;
            border-radius: 50%;
            z-index: 5;
        }

        /* æ–‡å­—æ¨™ç±¤è¨­å®š */
        .label {
            position: absolute;
            top: 50%;
            left: 50%;
            /* é—œéµä¿®æ­£ï¼šå…ˆç½®ä¸­ï¼Œå†æ—‹è½‰ */
            transform-origin: center; 
            color: #fff;
            font-weight: bold;
            user-select: none;
            text-align: center;
            line-height: 1;
        }

        .label span {
            display: block;
            /* æ–‡å­—ä¿®æ­£ï¼šè®“æ–‡å­—åº•éƒ¨æœå‘åœ“å¿ƒ */
        }

        /* åº§æ¨™ä¿®æ­£æ•¸å­¸ (é‡è¦ï¼):
           CSS Rotate 0åº¦ = 3é»é˜æ–¹å‘ (å³)
           Gradient 0åº¦ = 12é»é˜æ–¹å‘ (ä¸Š)
           
           æ‰€ä»¥ï¼šCSSè§’åº¦ = Gradientè§’åº¦ - 90åº¦
        */

        /* $1999 (å€é–“ 0-270) -> ä¸­å¿ƒ 135åº¦
           CSS = 135 - 90 = 45åº¦
        */
        .label-1999 { 
            transform: translate(-50%, -50%) rotate(45deg) translate(80px) rotate(-45deg); 
            font-size: 28px;
            color: #666; /* è®“é»‘è‰²å€å¡Šæ–‡å­—æš—ä¸€é»ï¼Œçªé¡¯å…¶ä»– */
        }

        /* $1299 (å€é–“ 270-310) -> ä¸­å¿ƒ 290åº¦
           CSS = 290 - 90 = 200åº¦
        */
        .label-1299 { 
            transform: translate(-50%, -50%) rotate(200deg) translate(120px) rotate(90deg); 
            font-size: 14px;
        }

        /* $1499 (å€é–“ 310-340) -> ä¸­å¿ƒ 325åº¦
           CSS = 325 - 90 = 235åº¦
        */
        .label-1499 { 
            transform: translate(-50%, -50%) rotate(235deg) translate(120px) rotate(90deg); 
            font-size: 13px;
        }

        /* $1099 (å€é–“ 340-360) -> ä¸­å¿ƒ 350åº¦
           CSS = 350 - 90 = 260åº¦
        */
        .label-1099 { 
            transform: translate(-50%, -50%) rotate(260deg) translate(130px) rotate(90deg); 
            font-size: 12px;
            color: #fff;
            text-shadow: 0 0 5px #ff0055;
            font-weight: 900;
        }


        #spinBtn {
            margin-top: 30px;
            padding: 15px 40px;
            font-size: 1.2rem;
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.2);
            font-weight: bold;
        }
        #spinBtn:hover {
            background: var(--primary);
            color: #000;
            box-shadow: 0 0 30px var(--primary);
        }
        #spinBtn:disabled { opacity: 0.5; cursor: not-allowed; }

        #confetti-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100;
        }
        #resultMsg {
            margin-top: 15px; height: 30px; color: #fff; font-size: 1.2rem;
            text-shadow: 0 0 10px rgba(255,255,255,0.5); opacity: 0; transition: opacity 0.5s;
        }
    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>
    <h1>å¹¸é‹æŠ˜æ‰£ä»»ä½ æŠ½ï¼</h1>

    <div class="wheel-container">
        <div class="stopper"></div>
        <div class="wheel" id="wheel">
            <div class="label label-1999"><span>$1999</span></div>
            <div class="label label-1299"><span>$1299</span></div>
            <div class="label label-1499"><span>$1499</span></div>
            <div class="label label-1099"><span>$1099</span></div>
        </div>
    </div>

    <div id="resultMsg"></div>
    <button id="spinBtn">é–‹å§‹æŠ½ç</button>

    <script>
        const wheel = document.getElementById('wheel');
        const spinBtn = document.getElementById('spinBtn');
        const resultMsg = document.getElementById('resultMsg');
        
        let currentRotation = 0;
        let spinCount = 0;
        const maxRiggedSpins = 5; 

        spinBtn.addEventListener('click', () => {
            spinBtn.disabled = true;
            resultMsg.style.opacity = '0';
            spinCount++;

            const baseSpins = 360 * 10; 

            // è§’åº¦è¨ˆç®—é‚è¼¯ (ä¿®æ­£å¾Œ)
            // ç›®æ¨™æ˜¯æŒ‡é‡(12é»æ–¹å‘, Gradient 0åº¦) åœåœ¨ç‰¹å®šå€é–“
            
            let targetAngle;
            let outcome;

            if (spinCount < maxRiggedSpins) {
                // === å¤±æ•— (å‰4æ¬¡) ===
                outcome = 'lose';
                // åœåœ¨ $1999 (0-270åº¦)
                // ä½†è¦ç‡Ÿé€  "å‰›å‰›éŒ¯é $1099" çš„æ„Ÿè¦º
                // $1099 åœ¨ 340-360(0)ã€‚
                // æ‰€ä»¥æŒ‡é‡æ‡‰è©²åœåœ¨ 0åº¦ é †æ™‚é‡éå»ä¸€é»é»çš„åœ°æ–¹ (å¦‚ 5åº¦~10åº¦)
                
                const nearMiss = Math.floor(Math.random() * 10) + 5; // 5åº¦åˆ°14åº¦
                const stopAngle = 360 - nearMiss;
                targetAngle = baseSpins + stopAngle;

            } else {
                // === å¿…å‹ (ç¬¬5æ¬¡) ===
                outcome = 'win';
                // åœåœ¨ $1099 (340-360åº¦)
                // ä¸­å¿ƒ 350åº¦
                const winTarget = 350;
                const offset = Math.floor(Math.random() * 6) - 3; // -3 ~ +3 å¾®èª¿
                const stopAngle = 360 - (winTarget + offset);
                targetAngle = baseSpins + stopAngle;
            }

            const currentMod = currentRotation % 360;
            const targetMod = targetAngle % 360;
            let adjust = targetMod - currentMod;
            if (adjust < 0) adjust += 360;
            
            const finalRotate = currentRotation + baseSpins + adjust;
            
            wheel.style.transform = `rotate(${finalRotate}deg)`;
            currentRotation = finalRotate;

            setTimeout(() => {
                spinBtn.disabled = false;
                spinBtn.innerText = "å†ä¾†ä¸€æ¬¡";
                resultMsg.style.opacity = '1';

                if (outcome === 'win') {
                    resultMsg.innerText = "ğŸ‰ æ­å–œï¼ä½ æŠ½ä¸­äº† $1099ï¼ ğŸ‰";
                    resultMsg.style.color = "#00ff88";
                    startConfetti();
                } else {
                    resultMsg.innerText = "çœŸå¯æƒœï¼ç²å¾—åŸåƒ¹ $1999";
                    resultMsg.style.color = "#aaa";
                }
            }, 4000);
        });

        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function startConfetti() {
            for (let i = 0; i < 200; i++) {
                particles.push({
                    x: window.innerWidth / 2,
                    y: window.innerHeight / 2,
                    vx: (Math.random() - 0.5) * 20,
                    vy: (Math.random() - 0.5) * 20 - 5,
                    life: 100 + Math.random() * 50,
                    color: `hsl(${Math.random() * 360}, 100%, 60%)`,
                    size: Math.random() * 5 + 2,
                    gravity: 0.25
                });
            }
            animateConfetti();
        }

        function animateConfetti() {
            if (particles.length === 0) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particles.length; i++) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.vy += p.gravity;
                p.life--;
                ctx.fillStyle = p.color;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
                if (p.life <= 0 || p.y > canvas.height) {
                    particles.splice(i, 1);
                    i--;
                }
            }
            requestAnimationFrame(animateConfetti);
        }
    </script>
</body>
</html>
